Задача 6
1.	Спроектируйте базу данных Supply для автоматизации учета информации о поступлении товара в магазин.  
Для каждого товара должна храниться информация: 
•	Артикул товара (уникален, содержит только цифры);
•	название товара;
•	категория товара;

Кроме того, хранится информация обо всех поставках товаров. Каждая поставка товара сопровождается товарной накладной:
•	поставляемый товар;
•	номер накладной (уникален);
•	цена за единицу товара; 
•	количество товара;
•	дата поступления товара.

В СУБД MY SQL, используя команды определения данных создать базу данных Создать таблицы Товар и Поставка, для каждой таблицы определив первичные ключи. Определить в подчиненной таблице внешний ключ. Создать связь между таблицами с помощью внешнего ключа, обеспечив каскадное удаление и обновление данных. (+1)
2.	Используя команды манипулирования данными, добавить в созданные таблицы по пять записей, таких чтобы результаты нижеперечисленных запросов содержали не менее одной записи. (+1)
3.	Написать запросы для получения следующей информации (результаты выполнения запросов не должны быть пустыми):
1)	Выберите номера поставок (накладных), в которых было поставлено максимальное количество товара. (+1)
2)	Выведите названия и категорию товаров, поставленных сегодня. (+1)
3)	Выведите название категории и общее количество поставленного товара каждой категории. (+1)
4)	Выведите название товара, дату поступления товара и стоимость товара в каждой поставке, которая  рачитывается следующим образом: «Стоимость» = «количество товара» * «цена за шт». (+1)

-- 1. Создание БД и таблиц
CREATE DATABASE Supply;
USE Supply;

CREATE TABLE Товар (
    артикул INT PRIMARY KEY CHECK (артикул REGEXP '^[0-9]+$'),
    название VARCHAR(255),
    категория VARCHAR(100)
);

CREATE TABLE Поставка (
    номер_накладной INT PRIMARY KEY,
    артикул_товара INT,
    цена DECIMAL(10, 2),
    количество INT,
    дата_поступления DATE,
    FOREIGN KEY (артикул_товара) REFERENCES Товар(артикул)
    ON DELETE CASCADE ON UPDATE CASCADE
);


-- 2. Вставка данных (обеспечиваем непустые результаты для запросов)
INSERT INTO Товар (артикул, название, категория) VALUES
(1, 'Ноутбук', 'Электроника'),
(2, 'Стул', 'Мебель'),
(3, 'Книга', 'Канцелярия'),
(4, 'Телефон', 'Электроника'),
(5, 'Ручка', 'Канцелярия');


INSERT INTO Поставка (номер_накладной, артикул_товара, цена, количество, дата_поступления) VALUES
(1, 1, 200.00, 5, CURDATE()), -- Поставка сегодня, максимальное количество
(2, 2, 600.00, 2, '2024-01-16'),
(3, 3, 300.00, 5, CURDATE()), -- Поставка сегодня, максимальное количество
(4, 4, 450.50, 3, '2024-01-18'),
(5, 5, 150.70, 1, '2024-01-19');



-- 3. SQL-запросы


-- 1) Номера поставок с максимальным количеством товара
SELECT номер_накладной
FROM Поставка
WHERE количество = (SELECT MAX(количество) FROM Поставка);

-- 2) Названия и категории товаров, поставленных сегодня
SELECT t.название, t.категория
FROM Товар t
JOIN Поставка p ON t.артикул = p.артикул_товара
WHERE p.дата_поступления = CURDATE();


-- 3) Название категории и общее количество товара
SELECT t.категория, SUM(p.количество) AS общее_количество
FROM Товар t
JOIN Поставка p ON t.артикул = p.артикул_товара
GROUP BY t.категория;


-- 4) Название товара, дата поступления и стоимость
SELECT t.название, p.дата_поступления, p.количество * p.цена AS Стоимость
FROM Товар t
JOIN Поставка p ON t.артикул = p.артикул_товара;