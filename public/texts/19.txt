Задача 19
1.	Спроектируйте базу данных Supply для автоматизации учета информации о поступлении товара в магазин. 
Для каждого товара должна храниться информация: 
•	артикул товара (уникален, содержит только цифры);
•	название товара;
•	категория товара;
•	количество товара на складе.
Кроме того, хранится информация обо всех поставках товаров. Каждая поставка товара сопровождается товарной накладной:
•	поставляемый товар;
•	номер накладной (уникален);
•	количество поставленного товара;
•	дата поставки товара.

В СУБД MY SQL, используя команды определения данных создать базу данных.  Создать таблицы Товар и Поставка, для каждой таблицы определив первичные ключи. Определить в подчиненной таблице внешний ключ. Создать связь между таблицами с помощью внешнего ключа, обеспечив каскадное удаление и обновление данных. (+1)
2.	Используя команды манипулирования данными, добавить в созданные таблицы по пять записей, таких чтобы результаты нижеперечисленных запросов содержали не менее одной записи. (+1)

3.	Используя команды языка SQL, выполнить следующие действия:
1)	Написать триггер, который при поставке товара автоматически увеличивает количество этого товара на складе.  (+2)
2)	Продемонстрировать работу триггера, добавив информацию о поставке товара.  (+1)
3)	Написать запрос для получения следующей информации (результаты выполнения запроса не должны быть пустыми): Выведите название товаров, поставленных в магазин в текущем месяце. (+1)

-- 1. Создание БД и таблиц
CREATE DATABASE IF NOT EXISTS Supply;
USE Supply;

CREATE TABLE IF NOT EXISTS Товар (
    артикул INT PRIMARY KEY CHECK (артикул REGEXP '^[0-9]+$'),
    название VARCHAR(255),
    категория VARCHAR(100),
    количество_на_складе INT
);

CREATE TABLE IF NOT EXISTS Поставка (
    номер_накладной INT PRIMARY KEY,
    артикул_товара INT,
    количество INT,
    дата_поставки DATE,
    FOREIGN KEY (артикул_товара) REFERENCES Товар(артикул)
    ON DELETE CASCADE ON UPDATE CASCADE
);

-- 2. Триггер
DELIMITER $$
CREATE TRIGGER ОбновлениеСклада
AFTER INSERT ON Поставка
FOR EACH ROW
BEGIN
    UPDATE Товар 
    SET количество_на_складе = количество_на_складе + NEW.количество 
    WHERE артикул = NEW.артикул_товара;
END $$
DELIMITER ;

-- 3. Демонстрация триггера
INSERT INTO Товар VALUES (7001, 'Смартфон', 'Электроника', 0);
INSERT INTO Поставка VALUES (9001, 7001, 50, CURDATE());

-- 4) Товары текущего месяца
SELECT название 
FROM Товар 

WHERE артикул IN (
    SELECT артикул_товара 
    FROM Поставка 
    WHERE MONTH(дата_поставки) = MONTH(CURDATE())
);
